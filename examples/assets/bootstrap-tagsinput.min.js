/*
 * bootstrap-tagsinput v0.2.0 by Tim Schlechter
 * 
 */
!function(a){"use strict";function b(b,c){this.itemsArray=[],this.itemsMap={},this.$element=a(b),this.$element.hide(),this.multiple="SELECT"===b.tagName&&b.getAttribute("multiple"),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input size="1" type="text" />').appendTo(this.$container),this.$element.after(this.$container),this.build(c)}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?h.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}var g={tagClass:function(){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},typeahead:{source:null,matcher:function(){return!0}}};b.prototype={constructor:b,add:function(b,c){var d=this;if(b===!1||b){if("object"==typeof b&&d.options.itemValue===g.itemValue)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if("string"==typeof b&&"INPUT"===this.$element[0].tagName){var f=b.split(",");if(f.length>1){for(var h=0;h<f.length;h++)this.add(f[h],!0);return c||d.pushVal(),void 0}}var i=d.options.itemValue(b),j=d.options.itemText(b),k=d.options.tagClass(b);void 0===d.itemsMap[i.toString()]&&(d.itemsArray.push(b),d.itemsMap[i]=b,d.$input.before(a('<span class="tag '+e(k)+'" data-value="'+e(i)+'">'+e(j)+'<span data-role="remove"></span></span>')),"SELECT"!==d.$element[0].tagName||a('option[value="'+escape(i)+'"]')[0]||d.$element.append(a('<option value="'+e(i)+'" selected>'+e(j)+"</option>")),c||d.pushVal())}}},remove:function(b,c){var d=this,e=d.options.itemValue(b);a('.tag[data-value="'+e+'"]',d.$container).remove(),a('option[value="'+e+'"]',d.$element).remove(),d.itemsArray.splice(d.itemsArray.indexOf(b),1),delete d.itemsMap[e],c||d.pushVal()},refresh:function(){},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0).trigger("change")},build:function(b){var e=this;e.options=a.extend({},g,b),c(e.options,"itemValue"),c(e.options,"itemText"),c(e.options,"tagClass"),e.options.source&&a.fn.typeahead&&(d(e.options,"source"),e.$input.typeahead({source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=e.options.source(b);a.isFunction(g.success)?g.success(d):a.when(g).then(d)},updater:function(a){e.add(this.map[a])},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}})),e.$container.on("click",a.proxy(function(){e.$input.focus()},e)),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target);switch(b.which){case 8:if(0===f(c[0])){var d=e.items();d[0]&&e.remove(d[d.length-1])}break;case 37:var g=c.prev();0===c.val().length&&g[0]&&(g.before(c),c.focus());break;case 39:var h=c.next();0===c.val().length&&h[0]&&(h.after(c),c.focus());break;case 13:e.options.source||(e.add(c.val()),c.val(""))}c.attr("size",Math.max(1,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){var c=a(b.target).closest(".tag");e.remove(c.data("item"))},e)),"INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)})},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[data-role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this).data("tagsinput");if(f){var g=f[c](d);void 0!==g&&e.push(g)}else f=new b(this,c),a(this).data("tagsinput",f),e.push(f),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var h=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
/*
//@ sourceMappingURL=bootstrap-tagsinput.min.js.map
*/